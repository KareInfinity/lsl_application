<mat-tab-group class="h-100">
  <mat-tab label="Configuration">
    <ng-template matTabContent>
      <div class="h-100 d-flex no-gutters p-1 pt-3">
        <div class="h-100 col-md-3 col-12 pr-md-2">
          <mat-card class="h-100 bg-white p-3 d-flex flex-column border">
            <p class="h5">Sites</p>
            <div class="flex-grow-1 overflow-auto mt-3">
              <mat-tree
                class=""
                [dataSource]="dataSource"
                [treeControl]="treeControl"
              >
                <mat-tree-node
                  *matTreeNodeDef="let node"
                  matTreeNodeToggle
                  matTreeNodePadding
                >
                  <button mat-icon-button disabled></button>
                  <mat-checkbox
                    class="checklist-leaf-node"
                    [checked]="checklistSelection.isSelected(node)"
                    (change)="todoLeafItemSelectionToggle(node)"
                    >{{ node.item.Name }}</mat-checkbox
                  >
                </mat-tree-node>

                <mat-tree-node
                  *matTreeNodeDef="let node; when: hasNoContent"
                  matTreeNodePadding
                >
                  <button mat-icon-button disabled></button>
                  <mat-form-field>
                    <input matInput #itemValue placeholder="New item..." />
                  </mat-form-field>
                </mat-tree-node>

                <mat-tree-node
                  *matTreeNodeDef="let node; when: hasChild"
                  matTreeNodePadding
                >
                  <button
                    class="mt-auto"
                    mat-icon-button
                    matTreeNodeToggle
                    [attr.aria-label]="'toggle ' + node.filename"
                  >
                    <mat-icon class="mat-icon-rtl-mirror">
                      {{
                        treeControl.isExpanded(node)
                          ? "expand_more"
                          : "chevron_right"
                      }}
                    </mat-icon>
                  </button>
                  <mat-checkbox
                    class="mt-auto"
                    [checked]="descendantsAllSelected(node)"
                    [indeterminate]="descendantsPartiallySelected(node)"
                    (change)="todoItemSelectionToggle(node)"
                  >
                    {{ node.item.Name }}</mat-checkbox
                  >
                </mat-tree-node>
              </mat-tree>
            </div>
          </mat-card>
        </div>
        <div class="h-100 col-md-3 col-12 pr-md-2">
          <mat-card
            class="h-100 p-0 bg-white d-flex flex-column border border-info"
          >
            <p class="h5 mt-3 mx-3 text-success">Enabled</p>
            <mat-form-field appearance="outline" class="mt-3 mx-3">
              <mat-label>Search</mat-label>
              <input matInput placeholder="Search" />
            </mat-form-field>
            <div class="flex-grow-1 overflow-auto">
              <div
                *ngFor="let device of enabled_device_list"
                [ngClass]="{
                  'bg-primary': selected_device == device,
                  'bg-success': selected_device != device
                }"
                class="mb-1 py-1 px-3 row no-gutters align-items-center text-white"
              >
                <p class="text-left pr-2 mr-auto">{{ device.feature_name }}</p>
                <i *ngIf="device.feature_key == 'IV_WATCH'" class="fa fa-cog" (click)="selectDevice(device)"></i>
              </div>
            </div>
          </mat-card>
        </div>
        <!-- <mat-card
    *ngIf="selected_device == null"
    class="h-100 bg-white col-md-3 col-12 p-0 d-flex flex-column border border-info"
  >
    <p class="h5 mt-3 mx-3 text-info">Available</p>
    <mat-form-field appearance="outline" class="mt-3 mt-3 mx-3">
      <mat-label>Search</mat-label>
      <input matInput placeholder="Search" />
    </mat-form-field>
    <div
      cdkDropList
      [cdkDropListData]="available_device_list"
      class="flex-grow-1 overflow-auto"
      (cdkDropListDropped)="drop($event)"
    >
      <div
        cdkDrag
        *ngFor="let device of available_device_list"
        class="mb-1 py-1 px-3 bg-info text-white"
      >
        <p class="text-center">{{ device.name }}</p>
      </div>
    </div>
  </mat-card> -->
        <mat-card
          *ngIf="selected_device != null"
          class="h-100 bg-white col-md-6 col-12 p-0 border border-primary d-flex flex-column"
        >
          <div class="row no-gutters p-3">
            <p class="h5 mr-2 mr-auto">
              Configuration for {{ selected_device.feature_name }}
            </p>
            <button
              mat-raised-button
              color="primary"
              class="self-align-center mr-3"
              (click)="gotoImportCables()"
            >
              Import
            </button>
            <button
              mat-raised-button
              color="primary"
              class="self-align-center"
              (click)="openAssociateCableDialog()"
            >
              Associate
            </button>
          </div>
          <div id="cable-driver-map-list-grid-container" class="py-2 px-3 flex-grow-1">
            <angular-slickgrid
              gridId="cableDriverMapListGrid"
              gridWidth="100%"
              gridHeight="100%"
              [columnDefinitions]="
                cable_driver_map_list_grid_column_definitions
              "
              [gridOptions]="cable_driver_map_list_grid_options"
              [dataset]="cable_driver_map_list_grid_dataset"
              (onAngularGridCreated)="cableDriverMapList($event)"
            >
            </angular-slickgrid>
          </div>
        </mat-card>
      </div>
    </ng-template>
  </mat-tab>
  <!-- <mat-tab label="Driver">
    <ng-template matTabContent>
      <gateway-driver></gateway-driver>
    </ng-template>
  </mat-tab>
  <mat-tab label="Cable">
    <ng-template matTabContent>
      <gateway-cable></gateway-cable>
    </ng-template>
  </mat-tab> -->
</mat-tab-group>
